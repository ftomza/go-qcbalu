### Спецификация обмена данными.
### Брокер сообщений.
Точка обмена сообщениями для РПЦ(RPC) `rpc.wallet` - обработка входящих команд для манипуляций над кошельком.

Точка обмена сообщениями для ПАБ(Pub) `pub.wallet` - публикация событий манипуляций над кошельком.

Очередь `rpc.wallet.main` - подписка обработчика команд.

Очереди `pub.wallet.main.clientX` - подписка на события клиентами.

**Дополнительно**:
На каждого клиента создается очередь необработанных сообщений c общей точкой обмена сообщениями необработанных сообщений.

#### Основные методы(маршруты) РПЦ.
- `add_balance_by_user_id` - Добавить баланс пользователя с первоначальной сумой;
- `del_balance_by_user_id` - Удалить баланс пользователя. Без проверки на существование записи;
- `get_balance_by_user_id` - Получить баланс пользователя;
- `debt_balance_by_user_id` - Списать с баланса пользователя;
- `cred_balance_by_user_id` - Зачислить на баланс пользователя;
- `lock_balance_by_user_id` - Заблокировать баланс пользователя;
- `unlock_balance_by_user_id` - Разблокировать баланс пользователя.

#### Основные маршруты ПАБ.
- `balance.add` - событие добавления;
- `balance.del` - событие удаления;
- `balance.upd` - событие обновление баланса.

#### Формат сообщений РПЦ.
Общий формат результата работы метода:
- Ответ без ошибок:
```json5
{
	"error": null,
	"message": null // Результат работы метода
}
```
- Ответ с ошибкой:
```json5
{
	"error": "ErrInternal",
	"message": "Your bunny road in service"
}
```

В ниже перечисленных форматах сообщений **результата** указывается только поле *message*.

- Списать, Зачислить, Добавление, Request:
```json5
{
	"user_id": "UUID",
	"sum": 0,
}
```

- Удаление, Получить, Заблокировать, Разблокировать, Request:
```json5
{
	"user_id": "UUID"
}
```

- Удаление, Response:
```json5
null
```

- Добавление, Получить, Заблокировать, Разблокировать, Списать, Зачислить, Response:
```json5
{
  "id": "UUID",
  "user_id": "UUID",
  "balance": 0,
  "lock": false,
  "update_at": "",
  "create_at": "",
}
```

#### Формат сообщений ПАБ.
Response:
```json5
{
	"id": "UUID",
	"user_id": "UUID",
	"balance": 0,
	"lock": false,
	"update_at": "", 
	"create_at": "",
}
```
